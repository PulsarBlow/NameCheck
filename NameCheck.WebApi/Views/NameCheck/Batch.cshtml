@model NameCheckBatchViewModel

@{
    ViewBag.Title = "Check for a name - Batch mode";
    string authorizationKey = ViewBag.AuthorizationKey as String;
}

<div class="page-header">
    <h1>Check for a name</h1>
    <h5 class="text-info">Batch mode</h5>
</div>

@using(Html.BeginForm("batch", "namecheck", FormMethod.Post, new { role = "form", noValidate = true}))
{
    @Html.AntiForgeryToken()
    @Html.ValidationSummary()
    <div class="form-group">
        <label for="batch" class="sr-only">Batch content</label>
        <textarea name="Batch" placeholder="Batch content" class="form-control" rows="5">@Model.Batch</textarea>
    </div>
    <button type="submit" class="btn btn-primary btn-lg"><i class="fa fa-check"></i> Check batch</button>
}

@if(Model.History != null && Model.History.Count > 0)
{
    <hr />
    <h4>Checked batch names</h4>
        <table class="table table-stripped table-hover">
        <thead>
            <tr>
                <th>#</th>
                <th>Name</th>
                <th>Twitter</th>
                <th>Domain .com</th>
                <th>Domain .net</th>
                <th>Domain .org</th>
            </tr>
        </thead>
            <tbody>
                @for (int i = 0; i < Model.History.Count; i++)
                {
                    foreach(var item in Model.History[i].NameChecks)
                    { 

                        var twitter = item.SocialNetworks.First(x => x.Key == "twitter").Value;

                    <tr>
                        <td>@(i + 1)</td>
                        <td>@item.Name</td>
                        <td class="@(twitter ? "ok" : "ko")"><i class="fa fa-@(twitter ? "check-circle" : "times-circle")"></i> @@@(item.Query)</td>
                        @foreach (var domain in item.Domains)
                        {
                            <td class="@(domain.Value ? "ok" : "ko")"><i class="fa fa-@(domain.Value ? "check-circle" : "times-circle")"></i> @(item.Query + "." + domain.Key)</td>
                        }
                    </tr>
                    }
                }
            </tbody>

    </table>
}
